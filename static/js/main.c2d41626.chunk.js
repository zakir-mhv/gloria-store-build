(this["webpackJsonpgloria-store"]=this["webpackJsonpgloria-store"]||[]).push([[0],{28:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),r=c(22),a=c.n(r),i=(c(28),c(12)),l=c(4),o=c.n(l),j=c(10),d=c(20),b=c(8),u=c(0),h=s.a.createContext();function x(e){var t=e.children,c=Object(n.useState)(!1),s=Object(b.a)(c,2),r=s[0],a=s[1],l=Object(n.useState)([]),x=Object(b.a)(l,2),m=x[0],O=x[1],f=Object(n.useState)([]),v=Object(b.a)(f,2),p=v[0],g=v[1],N=["all"].concat(Object(d.a)(p)),y=Object(n.useState)([]),w=Object(b.a)(y,2),C=w[0],k=w[1],P=function(){var e=Object(j.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,fetch("https://fakestoreapi.com/products/categories");case 4:return t=e.sent,e.next=7,t.json();case 7:c=e.sent,g(c),a(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),a(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(j.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,fetch("https://fakestoreapi.com/products");case 4:return t=e.sent,e.next=7,t.json();case 7:c=e.sent,O(c),a(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),a(!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(j.a)(o.a.mark((function e(t){var c,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("all"!==t){e.next=4;break}S(),e.next=20;break;case 4:return e.prev=4,a(!0),e.next=8,fetch("https://fakestoreapi.com/products/category/".concat(t));case 8:return c=e.sent,e.next=11,c.json();case 11:n=e.sent,O(n),a(!1),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(4),console.log(e.t0),a(!1);case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){P(),S()}),[]);return Object(u.jsx)(h.Provider,{value:{loading:r,allCategories:N,products:m,fetchProductsByCategory:F,cart:C,addToCart:function(e){var t=C.find((function(t){return t.id===e}));if(t)k(C.map((function(e){return e.id===t.id?Object(i.a)(Object(i.a)({},t),{},{quantity:t.quantity+1}):e})));else{var c=m.find((function(t){return t.id===e}));k([].concat(Object(d.a)(C),[Object(i.a)(Object(i.a)({},c),{},{quantity:1})]))}},removeFromCart:function(e,t){var c=C.find((function(t){return t.id===e}));1===c.quantity||t?k(C.filter((function(t){return t.id!==e}))):k(C.map((function(e){return e.id===c.id?Object(i.a)(Object(i.a)({},c),{},{quantity:c.quantity-1}):e})))},clearCart:function(){k([])}},children:t})}var m=c(9),O=c(2),f=c.p+"static/media/logo.edd591eb.png";var v=function(){var e=Object(n.useContext)(h).cart.length;return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light py-0",children:[Object(u.jsx)(m.b,{to:"/",className:"navbar-brand",children:Object(u.jsx)("img",{src:f,width:"100",alt:"logo"})}),Object(u.jsx)(m.b,{to:"/",className:"nav-link ml-lg-5 ml-2 text-success font-weight-bold",children:"Products"}),Object(u.jsx)(m.b,{to:"/cart",className:"nav-link ml-auto",children:Object(u.jsxs)("button",{className:"btn btn-success d-flex justify-content-between",children:[Object(u.jsx)("span",{className:"material-icons mr-1",children:"shopping_cart"}),Object(u.jsx)("span",{className:"badge badge-light mt-1",children:e})]})})]})})};var p=function(){return Object(u.jsx)("div",{className:"mt-5",children:Object(u.jsx)("footer",{className:"fixed-bottom px-3",children:Object(u.jsx)("a",{href:"https://zakir-mhv.github.io",target:"_blank",rel:"noreferrer",children:"\xa9 2021 Zakir Maharramov"})})})};var g=function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Loading..."}),Object(u.jsx)("span",{className:"spinner-border ml-2"})]})};var N=function(){var e=Object(n.useContext)(h),t=e.allCategories,c=e.fetchProductsByCategory;return Object(u.jsx)("div",{className:"text-center mt-3",children:t.map((function(e,t){return Object(u.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-success my-3 mx-2",onClick:function(){return c(e)},children:e},t)}))})};var y=function(e){var t=e.product,c=t.id,s=t.title,r=t.price,a=t.description,i=t.image,l=Object(n.useContext)(h).addToCart;return Object(u.jsx)("div",{className:"col-9 col-lg-3 my-3",children:Object(u.jsxs)("div",{className:"card card-border",children:[Object(u.jsx)("div",{children:Object(u.jsx)(m.b,{to:"details/".concat(c),children:Object(u.jsx)("div",{children:Object(u.jsx)("img",{className:"card-img-top img-box",src:i,alt:"product"})})})}),Object(u.jsxs)("div",{className:"card-body card-body-box",children:[Object(u.jsx)("h4",{className:"card-title",children:s}),Object(u.jsx)("p",{className:"card-text",children:a})]}),Object(u.jsxs)("div",{className:"card-footer d-flex justify-content-between align-items-center",children:[Object(u.jsxs)("h4",{className:"card-text mb-0",children:[r,"$"]}),Object(u.jsx)("span",{className:"material-icons btn btn-success",style:{fontSize:"1rem"},onClick:function(){l(c)},children:"add_shopping_cart"})]})]})})};var w=function(){var e=Object(n.useContext)(h),t=e.products;return e.loading?Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"90vh"},children:Object(u.jsx)(g,{})})}):Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(N,{}),Object(u.jsx)("div",{className:"row justify-content-center justify-content-lg-start mb-5",children:t.map((function(e){return Object(u.jsx)(y,{product:e},e.id)}))})]})};var C=function(){var e=Object(n.useState)(!0),t=Object(b.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)({}),a=Object(b.a)(r,2),i=a[0],l=a[1],d=i.title,x=i.price,f=i.description,v=i.image,p=Object(n.useContext)(h).addToCart,N=Object(O.f)().id;return Object(n.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://fakestoreapi.com/products/".concat(N));case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,l(c),s(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),s(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}})()()}),[N]),c?Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"90vh"},children:Object(u.jsx)(g,{})})}):Object(u.jsxs)("div",{className:"container py-3",children:[Object(u.jsx)("div",{className:"row justify-content-center",children:Object(u.jsx)("div",{className:"col-10 text-center my-3",children:Object(u.jsx)("h3",{children:d})})}),Object(u.jsxs)("div",{className:"row justify-content-center",children:[Object(u.jsx)("div",{className:"col-10 col-lg-3 my-3",children:Object(u.jsx)("img",{src:v,alt:"product",className:"img-fluid"})}),Object(u.jsxs)("div",{className:"col-10 col-lg-3 my-3",children:[Object(u.jsx)("p",{children:f}),Object(u.jsxs)("h4",{children:[x,"$"]})]})]}),Object(u.jsxs)("div",{className:"row justify-content-center",children:[Object(u.jsx)("div",{className:"col-10 col-lg-3 my-3",children:Object(u.jsx)(m.b,{to:"/",children:Object(u.jsx)("button",{className:"btn btn-primary",children:"Back to products"})})}),Object(u.jsx)("div",{className:"col-10 col-lg-3 my-3",children:Object(u.jsx)("button",{className:"btn btn-success",onClick:function(){var e=parseInt(N);p(e)},children:"Add to Cart"})})]})]})};var k=function(){return Object(u.jsx)("h1",{className:"text-center my-3",children:"Cart"})};var P=function(){return Object(u.jsx)("div",{className:"d-none d-lg-block",children:Object(u.jsxs)("div",{className:"row mb-2",children:[Object(u.jsx)("div",{className:"col-10 col-lg-2",children:Object(u.jsx)("h5",{className:"my-3 text-success font-weight-bold",children:"Product"})}),Object(u.jsx)("div",{className:"col-10 col-lg-2",children:Object(u.jsx)("h5",{className:"my-3 text-success font-weight-bold",children:"Name"})}),Object(u.jsx)("div",{className:"col-10 col-lg-2",children:Object(u.jsx)("h5",{className:"my-3 text-success font-weight-bold",children:"Price"})}),Object(u.jsx)("div",{className:"col-10 col-lg-2",children:Object(u.jsx)("h5",{className:"my-3 text-success font-weight-bold",children:"Quantity"})}),Object(u.jsx)("div",{className:"col-10 col-lg-2",children:Object(u.jsx)("h5",{className:"my-3 text-success font-weight-bold",children:"Remove"})}),Object(u.jsx)("div",{className:"col-10 col-lg-2",children:Object(u.jsx)("h5",{className:"my-3 text-success font-weight-bold",children:"Total"})})]})})};var S=function(e){var t=Object(n.useContext)(h),c=t.addToCart,s=t.removeFromCart,r=e.product,a=r.id,i=r.title,l=r.price,o=r.image,j=r.quantity;return Object(u.jsxs)("div",{className:"row justify-content-center border-bottom mb-2 py-2",children:[Object(u.jsx)("div",{className:"col-10 col-lg-2 mb-2",children:Object(u.jsx)("img",{src:o,alt:"product",style:{height:"5rem",objectFit:"contain"}})}),Object(u.jsx)("div",{className:"col-10 col-lg-2 mb-0",children:Object(u.jsx)("p",{children:i})}),Object(u.jsx)("div",{className:"col-10 col-lg-2 mb-0",children:Object(u.jsxs)("p",{children:[l,"$"]})}),Object(u.jsxs)("div",{className:"col-10 col-lg-2 mb-3",children:[Object(u.jsx)("span",{className:"btn btn-secondary",onClick:function(){return s(a)},children:"-"}),Object(u.jsx)("span",{className:"btn btn-secondary mx-1",children:j}),Object(u.jsx)("span",{className:"btn btn-secondary",onClick:function(){return c(a)},children:"+"})]}),Object(u.jsx)("div",{className:"col-10 col-lg-2 mb-3",children:Object(u.jsx)("span",{className:"material-icons btn btn-danger",onClick:function(){return s(a,"deleteFully")},children:"delete"})}),Object(u.jsxs)("div",{className:"col-10 col-lg-2 mb-2",children:[Object(u.jsx)("span",{className:"d-lg-none",children:"Product Total: "}),Object(u.jsxs)("span",{children:[(l*j).toFixed(2),"$"]})]})]})};var F=function(e){var t=e.total,c=Object(n.useState)(!1),s=Object(b.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)(null),l=Object(b.a)(i,2),d=l[0],h=l[1],x=Object(n.useRef)();return Object(n.useEffect)((function(){window.myButton&&window.myButton.close(),window.myButton=window.paypal.Buttons({createOrder:function(e,c){return c.order.create({intent:"CAPTURE",purchase_units:[{amount:{currency_code:"USD",value:t}}]})},onApprove:function(){var e=Object(j.a)(o.a.mark((function e(t,c){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.order.capture();case 2:n=e.sent,a(!0),console.log(n);case 5:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),onError:function(e){h(e),console.error(e)},style:{size:"responsive",shape:"pill",label:"checkout",layout:"horizontal",tagline:"true"}}),window.myButton.render(x.current)}),[t]),r?Object(u.jsxs)("div",{children:[Object(u.jsx)("h4",{className:"text-success",children:"Congrats! Payment was successful! Check your PayPal account!"}),Object(u.jsx)("div",{ref:x})]}):Object(u.jsxs)("div",{children:[d&&Object(u.jsxs)("h4",{className:"text-danger",children:["An error occurred! ",d.message]}),Object(u.jsx)("div",{ref:x})]})};var B=function(){var e=Object(n.useContext)(h),t=e.cart,c=e.clearCart,s=t.reduce((function(e,t){return e+t.quantity*t.price}),0),r=s.toFixed(2).toString();return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-12 mb-3 text-right",children:[Object(u.jsx)("span",{className:"d-lg-none",children:"Total: "}),Object(u.jsxs)("h2",{children:[s.toFixed(2),"$"]}),Object(u.jsx)("button",{className:"btn btn-outline-danger",onClick:function(){return c()},children:"Clear Cart"})]}),Object(u.jsx)("div",{className:"offset-lg-9 col-lg-3",children:Object(u.jsx)(F,{total:r})})]})})};var q=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"90vh"},children:Object(u.jsx)("h1",{children:"Your cart is empty!"})})})};var T=function(){var e=Object(n.useContext)(h).cart;return e.length?Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(k,{}),Object(u.jsx)(P,{}),e.map((function(e){return Object(u.jsx)(S,{product:e},e.id)})),Object(u.jsx)(B,{})]}):Object(u.jsx)(q,{})};var E=function(){return Object(u.jsx)("div",{className:"container",children:Object(u.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"90vh"},children:Object(u.jsx)("h1",{children:"Page not found"})})})};var _=function(){return Object(u.jsx)(x,{children:Object(u.jsxs)(m.a,{children:[Object(u.jsx)(v,{}),Object(u.jsxs)(O.c,{children:[Object(u.jsx)(O.a,{exact:!0,path:"/",children:Object(u.jsx)(w,{})}),Object(u.jsx)(O.a,{path:"/details/:id",children:Object(u.jsx)(C,{})}),Object(u.jsx)(O.a,{path:"/cart",children:Object(u.jsx)(T,{})}),Object(u.jsx)(O.a,{path:"*",children:Object(u.jsx)(E,{})})]}),Object(u.jsx)(p,{})]})})};a.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(_,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.c2d41626.chunk.js.map